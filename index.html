<!DOCTYPE html>
<html class="js" lang="zh" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
    <title>流量消耗器</title>
    <meta content="流量消耗器" name="keywords">
    <meta content="流量消耗器" name="description">
    <link href="css/dashlite.css" rel="stylesheet">
    <link href="css/style.css?v=20220626" rel="stylesheet">
    <link href="favicon.ico" rel="shortcut icon">
    <style>
        label {
            width: 100%;
        }

        .stat {
            width: 100%;
            column-gap: 1rem;
            padding: 1rem 1.5rem;
        }

        .stat-title {
            white-space: nowrap;
            opacity: .6;
        }

        .stat-value {
            white-space: nowrap;
            grid-column-start: 1;
            font-size: 1.8rem;
            font-weight: 700;
            line-height: 2.5rem
        }
    </style>
</head>
<body class="nk-body npc-invest bg-lighter ">
<!-- wrap @s -->
<div class="nk-wrap ">
    <!-- main header @s -->
    <div class="nk-header nk-header-fluid nk-header-fixed is-light">
        <div class="container-xl">
            <div class="nk-header-wrap link-between">
                <div class="nk-menu-trigger mr-sm-2 d-lg-none">
                    <a class="nk-nav-toggle nk-quick-nav-icon" data-target="headerNav" href="#">
                        <em class="icon ni ni-menu"></em>
                    </a>
                </div>
                <div class="nk-header-brand">
                    <a class="logo-link text-base" href="#">
                        <img alt="" class="hide-mb-sm" src="favicon.ico">流量消耗器
                    </a>
                </div>
                <!-- .nk-header-brand -->
                <div class="nk-header-tools nk-header-menu" data-content="headerNav">
                    <div class="nk-header-mobile">
                        <div class="nk-header-brand">
                            <span class="nio-version" style="font-size: 21px;position: inherit;">Test</span>
                        </div>
                        <div class="nk-menu-trigger mr-n2">
                            <a class="nk-nav-toggle nk-quick-nav-icon" data-target="headerNav" href="#">
                                <em class="icon ni ni-arrow-left"></em>
                            </a>
                        </div>
                    </div>
                    <!-- Menu -->
                </div>
                <!-- .nk-header-menu -->
                <div class="no-gutters">
                    <ul class="nk-quick-nav">
                        <li class="dropdown">
                            <a class="progress-rating dark-switch " href="javascript:">
                            <span class="nk-menu-icon">
                                <em class="icon ni ni-moon"></em>
                                <em class="icon ni ni-sun d-none"></em>
                            </span>
                            </a>
                        </li>
                        <!-- .dropdown -->
                    </ul>
                    <!-- .nk-quick-nav -->
                </div>
                <!-- .nk-header-tools -->
            </div>
            <!-- .nk-header-wrap -->
        </div>
        <!-- .container-fliud -->
    </div>
    <!-- main header @e -->
    <!-- content @s -->
    <div class="nk-content nk-content-lg nk-content-fluid">
        <div class="container-xl" id="app">
            <div class="col-sm-12 col-md-10 col-xl-8 center-block">
                <div class="card card-preview">
                    <div class="card-inner mt-3">
                        <div class="nya-title nk-ibx-action-item progress-rating">
                            <span class="nk-menu-text font-weight-bold">流量消耗器</span>
                        </div>
                        <div class="form-group">
                            <p>Tip:速度不满意？请尝试手工切换节点，加大线程</p>
                            <label class="form-label">下载链接</label>
                            <div class="form-control-wrap">
                                <label>
                                    <select class="form-control" type="text" v-model="set.input">
                                        <option selected="selected" value="https://sao.snu.ac.kr/datawaster/dummy15">
                                            Default[不推荐]
                                        </option>
                                        <option value="">↓↓ 百度 ↓↓</option>
                                        <option value="https://wppkg.baidupcs.com/issue/netdisk/apk/BaiduNetdisk_10.1.02.apk">
                                            百度网盘
                                        </option>
                                        <option value="">↓↓ 阿里巴巴 ↓↓</option>
                                        <option value="https://img.alicdn.com/imgextra/i1/O1CN01xA4P9S1JsW2WEg0e1_!!6000000001084-2-tps-2880-560.png">
                                            阿里图片CDN域名加速
                                        </option>
                                        <option value="https://gw.alipayobjects.com/os/volans-demo/f44c302e-b704-4a70-bcc6-0214e37ca256/MiniProgramStudio-1.17.4.exe">
                                            支付宝开放平台
                                        </option>
                                        <option value="https://gw.alicdn.com/tfs/TB1dek0GpT7gK0jSZFpXXaTkpXa-876-530.png">
                                            GW阿里CDN
                                        </option>
                                        <option value="">↓↓ 腾讯 ↓↓</option>
                                        <option value="https://game.gtimg.cn/images/nz/web202106/index/bc_part1.gif?0.3190485611376561">
                                            腾讯游戏
                                        </option>
                                        <option value="">↓↓ 京东 ↓↓</option>
                                        <option value="https://img10.360buyimg.com/live/jfs/t1/128947/12/26918/1361527/6260e71bE0ee85af5/ecaa17ea8dd3dddb.jpg">
                                            京东商城图片CDN服务
                                        </option>
                                        <option value="">↓↓ 网易 ↓↓</option>
                                        <option value="https://x19.gdl.netease.com/MCLauncher_publish_1.8.0.35383.exe">
                                            网易(阿里CDN)
                                        </option>
                                        <option value="https://mov.bn.netease.com/open-movie/nos/mp4/2015/11/26/SB8ECV1ST_sd.mp4">
                                            网易(白云山CDN)
                                        </option>
                                        <option value="">↓↓ VIVO ↓↓</option>
                                        <option value="https://wwwstatic.vivo.com.cn/vivoportal/files/resource/funtouch/1651200648928/images/os2-jude-video.mp4">
                                            VIVO官网静态资源
                                        </option>
                                        <option value="https://imgwsdl.vivo.com.cn/appstore/developer/soft/20210125/202101251051528awqa.apk">
                                            VIVO应用商店
                                        </option>
                                        <option value="">↓↓ 字节跳动 ↓↓</option>
                                        <option value="https://lf9-cdn-tos.bytecdntp.com/cdn/yuntu-index/1.0.4/case/maiteng/detailbg.png">
                                            字节跳动前端公共库
                                        </option>
                                        <option value="">↓↓ 小米 ↓↓</option>
                                        <option value="https://cnbj0.fds.api.xiaomi.com/b2c-data-mishop/9b9d95e1ece27d5ec75205e5fe719ba5.apk">
                                            小米应用商店
                                        </option>
                                        <option value="https://cdn.alsgp0.fds.api.mi-img.com/micomm/MiFlash2020-3-14-0.rar">
                                            miflash
                                        </option>
                                        <option value="https://consumer-img.huawei.com/content/dam/huawei-cbg-site/cn/mkt/mobileservices/appgallery/download/PC107f1b3947c942ffaa14334a879065d8.2107261020.exe">
                                            华为
                                        </option>
                                        <option value="">↓↓ 中国移动 ↓↓</option>
                                        <option value="https://d.musicapp.migu.cn/upload/fbpt_rsync_apps/local/signed/MobileMusic7140/MobileMusic7140_0140068.apk">
                                            咪咕音乐
                                        </option>
                                        <option value="">↓↓ 中国电信 ↓↓</option>
                                        <option value="https://vod-origin-rjzy.gdoss.xstore.ctyun.cn/5ca444c333bf4727babc7d154aabe559.mp4">
                                            天翼云(中国电信)
                                        </option>
                                        <option value="">↓↓ 国内其他大厂 ↓↓</option>
                                        <option value="https://dh5.cntv.myhwcdn.cn/asp/h5e/hls/1200/0303000a/3/default/ec48b9f8c76e49af842d4942914ad663/1.ts">
                                            CCTV
                                        </option>
                                        <option value="https://714-3.vod.tv.itc.cn/sohu/ifox/Lzk5LzI1Mi8iOJyyPTwssSSquySopbGYrBm6qDQjlzI2s5MyHpU/SHPlayer_3.28_18312.dmg">
                                            搜狐
                                        </option>
                                        <option value="http://i.apps.sina.cn/tqt/zip/com.sina.tianqitong_6.1892_2019.07.29.17.54.18.apk">
                                            新浪
                                        </option>
                                        <option value="https://cdn.aixifan.com/downloads/AcFun-acfunh5-release-6.62.0.1238_x64_60b608.apk">
                                            AcFun
                                        </option>
                                        <option value="http://image.uc.cn/s/uae/g/2i/uninstallpg/Quark_Browser_unins.apk">
                                            Quark_Browser
                                        </option>
                                        <option value="https://dl.pddpic.com/android_dev/2021-02-08/4ff25ce6148aa99aeeba723b5891ae72.apk">
                                            拼多多
                                        </option>
                                        <option value="https://sta-op.douyucdn.cn/vod-index/2022/06/22/848adf3ae99d2be506026380c2ad42c1.png">
                                            斗鱼
                                        </option>
                                        <option value="https://kodo-toolbox.qiniu.com/kodo-browser-Linux-x64-v1.0.17.zip">
                                            七牛云
                                        </option>
                                        <option value="https://picture.xianniu.com/pc/download/3.8.0.4/xianniusetup.3.8.0.4.exe">
                                            鲜牛加速器(华为云CDN)
                                        </option>
                                        <option value="https://gh.con.sh/https://github.com/AaronFeng753/Waifu2x-Extension-GUI/releases/download/v2.21.12/Waifu2x-Extension-GUI-v2.21.12-Portable.7z">
                                            GitHub文件加速(cloudflare CDN)
                                        </option>
                                        <option value="">↓↓ 海外优选节点 ↓↓</option>
                                        <option value="https://cachefly.cachefly.net/100mb.test">
                                            Cachefly 100MB
                                        </option>
                                        <option value="https://speed.cloudflare.com/__down?bytes=25000000">
                                            cloudflare
                                        </option>
                                        <option value="https://sgp-ping.vultr.com/vultr.com.1000MB.bin">
                                            Vultr 1G(新加坡)
                                        </option>
                                        <option value="https://nj-us-ping.vultr.com/vultr.com.1000MB.bin">
                                            Vultr 1G(纽约)
                                        </option>
                                        <option value="https://speedtest.tokyo2.linode.com/100MB-tokyo2.bin">
                                            Linode 100MB(日本省东京市)
                                        </option>
                                        <option value="">↓↓ 如需自定义请直接在下方填写资源链接 ↓↓</option>
                                    </select>
                                </label>
                                <label>
                                    <input autocomplete="off" class="form-control" placeholder="下载链接" style=""
                                           type="text" v-model="set.input">
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">线程</label>
                            <div class="form-control-wrap number-spinner-wrap">
                                <button @click="if(set.thread>1)set.thread--"
                                        class="btn btn-icon btn-outline-primary number-spinner-btn number-minus"><em
                                        class="icon ni ni-minus"></em>
                                </button>
                                <label>
                                    <input class="form-control number-spinner" max="32" min="1" type="number"
                                           v-model="set.thread">
                                </label>
                                <button class="btn btn-icon btn-outline-primary number-spinner-btn number-plus"><em
                                        @click="if(set.thread<32)set.thread++" class="icon ni ni-plus"></em></button>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="preview-block">
                                <div class="custom-control custom-switch">
                                    <input class="custom-control-input" id="customSwitch2" type="checkbox"
                                           v-model="set.infinite">
                                    <label class="custom-control-label" for="customSwitch2">无限循环</label>
                                </div>
                            </div>
                        </div>
                        <button @click="run" class="btn btn-dim btn-outline-secondary btn-block card-link">
                            {{set.status ? '停止' : '开始'}}
                        </button>
                        <div class="row mt-4">
                            <div class="col-sm-12 col-md-4 border stat">
                                <div class="text-dark">
                                    <svg class="h-15 w-15 float-right pt-3" fill="none" stroke="currentColor"
                                         viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"
                                              stroke-linecap="round" stroke-linejoin="round"
                                              stroke-width="2"></path>
                                    </svg>
                                </div>
                                <div class="stat-title">已消失的流量</div>
                                <div class="stat-value">{{changeFilesize(waste)}}</div>
                            </div>
                            <div class="col-sm-12 col-md-4 border stat">
                                <div class="text-info">
                                    <svg class="h-15 w-15 float-right pt-3" fill="none" stroke="currentColor"
                                         viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M13 10V3L4 14h7v7l9-11h-7z" stroke-linecap="round"
                                              stroke-linejoin="round"
                                              stroke-width="2"></path>
                                    </svg>
                                </div>
                                <div class="stat-title">每秒实时流量</div>
                                <div class="stat-value text-info">{{speed}}</div>
                            </div>
                            <div class="col-sm-12 col-md-4 border stat">
                                <div class="text-dark">
                                    <svg class="h-15 w-15 float-right pt-3" fill="none" stroke="currentColor"
                                         viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" stroke-linecap="round"
                                              stroke-linejoin="round"
                                              stroke-width="2"></path>
                                    </svg>
                                </div>
                                <div class="stat-title">运行时长</div>
                                <div class="stat-value">{{secToTime(spend)}}</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card card-preview">
                    <div class="card-inner">
                        <h6><em class="icon ni ni-info"></em>有些人网页扒的就是一坨答辩</h6>
                        <div class="accordion-inner">
                            <p>多线程消耗流量,web版流量杀手</p>
                            <p>此工具可以以浪费的形式消耗你的流量</p>
                            <p>Tips:
                                如手机套餐内含头条系，阿里系，百度系等定向流量，填写免流量的资源URL，即可直接消耗免费的定向流量</p>
                            <p>如果是要消耗机场流量,建议使用海外节点,速度可能会更快</p>
                            <p>注：虽支持可自定义下载地址 但无法请求跨域链接</p>
                            
                            <hr>
                            <a class="nk-menu-link nk-ibx-action-item" href="old-index.html">→ 点我切换回旧版 ←</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-5 text-center">
            <a class="btn btn-sm btn-outline-light " href="https://github.com/Sherlock-QXY/Data-Waster">
                <span class="nk-menu-link nk-ibx-action-item">https://github.com/Sherlock-QXY/Data-Waster</span>
            </a>
        </div>
    </div>
    <!-- content @d -->
    <div class="nk-footer nk-footer-fluid bg-lighter">
        <div class="container-xl">
            <div class="nk-footer-wrap">
                <div class="nk-footer-copyright"> &copy; 2022</div>
            </div>
        </div>
    </div>
    <!-- footer @e -->
</div>
<!-- wrap @e -->
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.bundle.min.js"></script>
<script src="js/layer.js"></script>
<script src="js/nioapp.min.js"></script>
<script src="js/script.js"></script>
<script src="js/common.js"></script>
<script src="js/vue.min.js"></script>
<script src="js/axios.min.js"></script>
<script>
    new Vue({
        el: '#app',
        data: {
            set: {
                input: 'https://cdn.alsgp0.fds.api.mi-img.com/micomm/MiFlash2020-3-14-0.rar',
                output: '',
                infinite: true,
                status: false,
                thread: 1,
            },
            tasks: [],
            speed: '0.00B/s',
            spend: 0,
            waste: 0,
            timer: null,
            cancelSource: axios.CancelToken.source()
        },
        watch: {
            async 'set.status'(newVal) {
                if (newVal) {
                    this.cancelSource = axios.CancelToken.source()
                    this.timer = setInterval(() => {
                        this.speed = this.changeDownloadSpeed(this.tasks.reduce(function (prev, curr) {
                            return prev + curr;
                        }, 0));
                        this.spend++
                    }, 1000)
                    do {
                        await new Promise(resolve => {
                            let task = []
                            for (let i = 0; i < this.set.thread; i++) {
                                task.push(this.download(Math.random().toString(36).substr(2, 10)))
                            }
                            Promise.all(task).finally(resolve)
                        })
                    } while (this.set.status && this.set.infinite)
                } else {
                    clearInterval(this.timer)
                    this.cancelSource.cancel()
                }
            }
        },
        methods: {
            run() {
                this.set.status = !this.set.status
            },
            download(id) {
                let loaded = 0
                let speed = 0
                let timestamp = new Date().getTime()
                let that = this
                const index = this.tasks.push(speed) - 1
                return axios.request({
                    url: this.set.input,
                    params: {
                        [id]: id,
                    },
                    cancelToken: this.cancelSource.token,
                    onDownloadProgress: function (progressEvent) {
                        // 处理原生进度事件
                        const now = new Date().getTime();
                        speed = (progressEvent.loaded - loaded) / (now - timestamp) * 1000
                        that.tasks[index] = speed
                        that.waste += progressEvent.loaded - loaded
                        loaded = progressEvent.loaded
                        timestamp = now
                    },
                }).catch(e => {
                    if (!axios.isCancel(e)) {
                        layer.msg(e.message, {icon: 2})
                        //  this.set.status = false
                        this.set.status = true
                    }
                }).finally(() => {
                    delete that.tasks[index]
                })
            },
            secToTime(s) {
                let t = '';
                if (s > -1) {
                    let hour = Math.floor(s / 3600)
                    let min = Math.floor(s / 60) % 60
                    let sec = s % 60
                    if (hour > 0) {
                        if (hour < 10) {
                            t += '0'
                        }
                        t = hour + "h"
                    }
                    if (hour > 0 || min > 0) {
                        if (min < 10) {
                            t += '0'
                        }
                        t += min + "m"
                    }
                    if (sec < 10) {
                        t += '0'
                    }
                    t += sec + 's'
                }
                return t
            },
            changeFilesize: (filesize) => {
                filesize = parseInt(filesize);
                let size;
                if (filesize === 0) {
                    size = "0.00 B"
                } else if (filesize < 1024) { //小于1KB，则转化成B
                    size = filesize.toFixed(2) + " B"
                } else if (filesize < 1024 * 1024) { //小于1MB，则转化成KB
                    size = (filesize / 1024).toFixed(2) + " KB"
                } else if (filesize < 1024 * 1024 * 1024) { //小于1GB，则转化成MB
                    size = (filesize / (1024 * 1024)).toFixed(2) + " MB"
                } else { //其他转化成GB
                    size = (filesize / (1024 * 1024 * 1024)).toFixed(2) + " GB"
                }
                return size;
            },
            changeDownloadSpeed(filesize) {
                filesize = this.changeFilesize(filesize);
                return filesize.replace(/\s([K|M|G|B]*)B?/, '$1/s')
            }
        },
    })
</script>
</body>
</html>
